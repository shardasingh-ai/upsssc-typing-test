<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Typing Test ‚Äî English & Hindi</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root { --bg:#f6f7fb; --card:#fff; --brand:#0d6efd; --muted:#666; --ok:#198754; --warn:#dc3545; }
  * { box-sizing:border-box; }
  body { margin:0; background:var(--bg); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:#222; }
  .wrap { max-width: 980px; margin: 32px auto; padding: 0 16px; }
  .card { background:var(--card); border-radius:14px; box-shadow:0 6px 22px rgba(0,0,0,.06); padding:28px; }
  h1 { margin:0 0 12px; font-size:28px; }
  h2 { margin:18px 0 8px; font-size:20px; color:var(--brand); }
  p  { margin:8px 0; line-height:1.6; font-size:16px; color:#222; }
  ul { margin:8px 0 0 20px; color:#222; }
  .muted { color:var(--muted); }
  .btn { background:var(--brand); color:#fff; border:none; padding:12px 18px; border-radius:10px; font-weight:600; cursor:pointer; }
  .btn:hover { filter:brightness(.95); }
  .btn.secondary { background:#6c757d; }
  .grid { display:grid; gap:18px; }
  .two { grid-template-columns: 1fr; }
  @media(min-width: 860px){ .two { grid-template-columns: 1fr 1fr; } }
  .passage { background:#f9fafc; border:1px solid #eef0f5; border-radius:12px; padding:14px; min-height:180px; }
  .passage.hi { font-family:"Noto Sans Devanagari", sans-serif; line-height:1.9; }
  .toast { position: fixed; left:50%; transform:translateX(-50%); bottom:24px; background:#111; color:#fff; padding:10px 14px; border-radius:8px; opacity:0; pointer-events:none; transition:opacity .25s ease; font-size:14px; }
  .toast.show { opacity:1; }
  .bar { display:flex; gap:10px; justify-content:flex-end; margin-top:18px; }
  .small { font-size:13px; }
  .hidden { display:none; }
</style>
</head>
<body>
<div class="wrap">

  <!-- Screen: Instructions -->
  <section id="screen-instructions" class="card">
    <h1>Typing Test ‚Äî English & Hindi</h1>
    <p class="muted">Please read this carefully before starting the test.</p>
    <h2>Instructions</h2>
    <ul>
      <li>You will be shown <strong>two passages</strong> ‚Äî one in <strong>English</strong> and one in <strong>Hindi</strong>.</li>
      <li>Type both passages in your input areas. Avoid spelling mistakes and extra spaces.</li>
      <li><strong>Paste (Ctrl/Cmd + V) is blocked.</strong> Manual typing only. If attempted, a warning will appear.</li>
      <li>Use backspace wisely. (You may customize stricter rules in code as needed.)</li>
      <li>Click <strong>Start Test</strong> to load random passages and begin.</li>
    </ul>
    <div class="bar">
      <button class="btn" id="btnStart">Start Test</button>
    </div>
    <p class="small muted">Tip: Keep your fingers relaxed. Accuracy first, speed follows.</p>
  </section>

  <!-- Screen: Test -->
  <section id="screen-test" class="card hidden">
    <h2>English Passage</h2>
    <div id="englishPassage" class="passage" aria-label="English passage to type">Loading‚Ä¶</div>
    <textarea id="englishInput" rows="6" class="passage" placeholder="Start typing the English passage here‚Ä¶" aria-label="English typing area"></textarea>

    <h2 style="margin-top:24px;">Hindi Passage</h2>
    <div id="hindiPassage" class="passage hi" aria-label="Hindi passage to type">Loading‚Ä¶</div>
    <textarea id="hindiInput" rows="7" class="passage hi" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§®‡•Å‡§ö‡•ç‡§õ‡•á‡§¶ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‚Ä¶" aria-label="Hindi typing area"></textarea>

    <div class="bar">
      <button class="btn secondary" id="btnNew">üîÑ Load New Passages</button>
      <button class="btn" id="btnBack">‚è™ Back to Instructions</button>
    </div>
    <p class="small muted">Note: You must complete both passages in one sitting.</p>
  </section>

</div>

<!-- Toast -->
<div id="toast" class="toast">‚ö†Ô∏è Pasting is disabled. Please type manually.</div>

<script src="passages.js"></script>
<script>
  const $ = sel => document.querySelector(sel);
  const screenInstructions = $("#screen-instructions");
  const screenTest = $("#screen-test");
  const toast = $("#toast");
  const englishPassageEl = $("#englishPassage");
  const hindiPassageEl   = $("#hindiPassage");
  const englishInput     = $("#englishInput");
  const hindiInput       = $("#hindiInput");
  const btnStart = $("#btnStart");
  const btnNew   = $("#btnNew");
  const btnBack  = $("#btnBack");

  // --- Helpers ---
  function showToast(msg) {
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 1800);
  }

  function pickRandom(list) {
    return list[Math.floor(Math.random() * list.length)];
  }

  function loadNewPassages() {
    const englishList = passages.filter(p => p.language === "English");
    const hindiList   = passages.filter(p => p.language === "Hindi");
    const en = pickRandom(englishList);
    const hi = pickRandom(hindiList);

    englishPassageEl.textContent = en.text;
    hindiPassageEl.textContent   = hi.text;

    englishInput.value = "";
    hindiInput.value   = "";

    // Keep chosen IDs on dataset if you want to track/score
    englishInput.dataset.passageId = en.id;
    hindiInput.dataset.passageId   = hi.id;
  }

  function goToTest() {
    screenInstructions.classList.add("hidden");
    screenTest.classList.remove("hidden");
    loadNewPassages();
    // Focus the first input to start immediately
    setTimeout(() => englishInput.focus(), 50);
  }

  function goToInstructions() {
    screenTest.classList.add("hidden");
    screenInstructions.classList.remove("hidden");
  }

  // --- Paste Blocker + Warning ---
  function preventPaste(e) {
    e.preventDefault();
    showToast("‚ö†Ô∏è Pasting is disabled. Please type manually.");
  }
  englishInput.addEventListener("paste", preventPaste);
  hindiInput.addEventListener("paste", preventPaste);

  // Also intercept Ctrl/Cmd+V
  function keyBlocker(e) {
    const isMac = navigator.platform.toUpperCase().includes("MAC");
    if ((isMac && e.metaKey && e.key.toLowerCase() === "v") ||
        (!isMac && e.ctrlKey && e.key.toLowerCase() === "v")) {
      e.preventDefault();
      showToast("‚ö†Ô∏è Pasting is disabled. Please type manually.");
    }
  }
  englishInput.addEventListener("keydown", keyBlocker);
  hindiInput.addEventListener("keydown", keyBlocker);

  // --- (Optional) Gentle backspace limiter example ---
  // Uncomment to limit backspace to within the current input only (demo-level).
  // englishInput.addEventListener("keydown", (e) => {
  //   if (e.key === "Backspace") {
  //     // You can add custom logic here to restrict based on word boundaries.
  //   }
  // });
  // hindiInput.addEventListener("keydown", (e) => {
  //   if (e.key === "Backspace") {
  //     // Add Hindi-specific rule if desired.
  //   }
  // });

  // --- Events ---
  btnStart.addEventListener("click", goToTest);
  btnNew.addEventListener("click", loadNewPassages);
  btnBack.addEventListener("click", goToInstructions);

  // Default: show instructions first (already visible)
</script>
</body>
</html>
